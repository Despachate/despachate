<div class="container mt-4 mb-5 shadow p-3 mb-3 bg-white rounded">
  <div class="my-5 mx-2 row">
    <div class="col-7">
      <h2 class="d-none d-md-block text-right mr-0 pr-0">
        MI <span class="texto-morado"><b>SÚPER RECURRENTE</b></span>
      </h2>
      <h2 class="d-md-none d-block">
        MI <span class="texto-morado"> <b>SÚPER RECURRENTE</b></span>
      </h2>
    </div>
    <div class="col-5">
      <a (click)="back()" class="texto-negro todos monoRegular"
        ><u><strong> Regresar</strong></u></a
      >
    </div>
  </div>
  <div class="row">
    <div class="col">
      <h5
        data-toggle="tooltip"
        data-placement="right"
        title="Puedes cambiar la opción seleccionada"
      >
        <b>MÉTODO DE ENTREGA</b>
      </h5>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 col-12">
      <div class="shadow-sm p-3 mb-2 bg-white rounded card mb-1">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <h4
              class="card-title"
              data-toggle="tooltip"
              data-placement="right"
              title="Puedes cambiar la opción seleccionada"
            >
              <img
                src="assets/images/DIRECCION.svg"
                class="mr-1"
                height="15"
                alt=""
                srcset=""
              /><b>MIS DIRECCIONES</b>
            </h4>
            <a
              [routerLink]="['/', 'altaDireccion']"
              class="texto-negro monoRegular"
              ><u><b> Administrar</b></u></a
            >
          </div>

          <div *ngFor="let dir of listaDirecciones">
            <div class="custom-control custom-checkbox">
              <input
                type="radio"
                class="custom-control-input"
                [(ngModel)]="direccion"
                name="direccion"
                value="{{ dir._id }}"
                [attr.id]="dir._id"
              />
              <label class="custom-control-label" [attr.for]="dir._id"
                >{{ dir.calle }} C.P. {{ dir.codigoPostal }}</label
              >
            </div>
          </div>
        </div>
      </div>

      <div class="shadow-sm p-3 mb-2 bg-white rounded card mb-1">
        <div class="card-body">
          <div class="d-flex">
            <h5
              class="card-title"
              data-toggle="tooltip"
              data-placement="right"
              title="Puedes cambiar la opción seleccionada"
            >
              <b>FECHAS EN QUE RECIBIRÁS TU PEDIDO</b>
              <i class="fa fa-truck ml-1" aria-hidden="true"></i>
            </h5>
          </div>

          <div>
            <p>
              Al seleccionar <span class="text-danger">Express</span>, tu pedido
              se agendará para entrega en un promedio de
              <span class="text-danger">4-5</span>, horas del mismo día. Siempre
              y cuando tu compra sea en un horario antes de las
              <span class="text-danger">3</span> de la tarde.
            </p>
            <p>
              Si se realiza después de las <span class="text-danger">3</span> de
              la tarde se agendará tu entrega a primera hora del día siguiente.
            </p>
          </div>

          <div class="card shadow-sm">
            <div class="card-body">
              <div class="row font-weight-bold">
                <div class="col-6 mb-4 monoRegular">Fecha de entrega</div>
                <div class="col-6 mb-4 monoRegular">Horario</div>
              </div>
              <div class="row font-weight-bold">
                <div
                  class="col-12"
                  style="margin: 0 !important; padding: 0 !important"
                >
                  <bs-datepicker-inline
                    [bsConfig]="{ showWeekNumbers: false }"
                    [(bsValue)]="dateSelecte"
                    (bsValueChange)="onDateChange($event)"
                  ></bs-datepicker-inline>
                  <div
                    class="row renglond"
                    style="
                      margin: 0 !important;
                      padding: 0 !important;
                      margin-top: 15px !important;
                    "
                  >
                    <div class="mb-3 d-flex w-100">
                      <!-- <div class="custom-control custom-checkbox mr-5">
                        <input
                          type="radio"
                          class="custom-control-input"
                          name="fechaEntrega"
                          value="cada Semana"
                          [(ngModel)]="fechaEntrega"
                          id="cadaSemana"
                        />
                        <label class="custom-control-label" for="cadaSemana"
                          >Recibir cada semana</label
                        >
                      </div> -->
                      <div
                        class="custom-control custom-checkbox w-100 text-center"
                      >
                        <input
                          type="radio"
                          class="custom-control-input"
                          name="horaEntrega"
                          value="9:00am-12:00pm"
                          [(ngModel)]="horaEntrega"
                          id="9:00am-12:00pm"
                        />
                        <label class="custom-control-label" for="9:00am-12:00pm"
                          >9:00am-12:00pm</label
                        >
                      </div>
                    </div>
                  </div>
                  <div
                    class="row renglond"
                    style="margin: 0 !important; padding: 0 !important"
                  >
                    <div class="mb-3 d-flex mt-3 w-100">
                      <!-- <div class="custom-control custom-checkbox mr-4">
                        <input
                          type="radio"
                          class="custom-control-input"
                          name="fechaEntrega"
                          value="cada 2 Semanas"
                          [(ngModel)]="fechaEntrega"
                          id="cada2Semanas"
                        />
                        <label class="custom-control-label" for="cada2Semanas"
                          >Recibir cada 2 semanas</label
                        >
                      </div> -->
                      <div
                        class="custom-control custom-checkbox w-100 text-center"
                      >
                        <input
                          type="radio"
                          class="custom-control-input"
                          name="horaEntrega"
                          value="12:00pm-4:00pm"
                          [(ngModel)]="horaEntrega"
                          id="12:00pm-4:00pm"
                        />
                        <label class="custom-control-label" for="12:00pm-4:00pm"
                          >12:00pm-4:00pm</label
                        >
                      </div>
                    </div>
                  </div>
                  <div
                    class="row renglond"
                    style="margin: 0 !important; padding: 0 !important"
                  >
                    <div class="mb-3 d-flex mt-3 w-100">
                      <!-- <div class="custom-control custom-checkbox mr-4">
                        <input
                          type="radio"
                          class="custom-control-input"
                          name="fechaEntrega"
                          value="cada 3 Semanas"
                          [(ngModel)]="fechaEntrega"
                          id="cada3Semanas"
                        />
                        <label class="custom-control-label" for="cada3Semanas"
                          >Recibir cada 3 semanas</label
                        >
                      </div> -->
                      <div
                        class="custom-control custom-checkbox w-100 text-center"
                      >
                        <input
                          type="radio"
                          class="custom-control-input"
                          name="horaEntrega"
                          value="4:00pm-7:00pm"
                          [(ngModel)]="horaEntrega"
                          id="4:00pm-7:00pm"
                        />
                        <label class="custom-control-label" for="4:00pm-7:00pm"
                          >4:00pm-7:00pm</label
                        >
                      </div>
                    </div>
                  </div>
                  <div
                    class="row renglond"
                    style="margin: 0 !important; padding: 0 !important"
                  >
                    <div class="mb-3 d-flex mt-3">
                      <!-- <div class="custom-control custom-checkbox mr-4">
                        <input
                          type="radio"
                          class="custom-control-input"
                          name="fechaEntrega"
                          value="cada 4 Semanas"
                          [(ngModel)]="fechaEntrega"
                          id="cada4Semanas"
                        />
                        <label class="custom-control-label" for="cada4Semanas"
                          >Recibir cada 4 semanas</label
                        >
                      </div> -->
                    </div>
                  </div>
                </div>
                <div class="row mt-3 d-md-block d-none" hidden>
                  <label for="dias" class="font-weight-bold ml-3"
                    >Quiero recibir los días</label
                  >
                  <select
                    [(ngModel)]="diaRecepcion"
                    name="dias"
                    id="dias"
                    class="ml-3"
                  >
                    <option value="Lunes" selected>Lunes</option>
                    <option value="Martes">Martes</option>
                    <option value="Miércoles">Miércoles</option>
                    <option value="Jueves">Jueves</option>
                    <option value="Viernes">Viernes</option>
                    <option value="Sábado">Sábado</option>
                    <option value="Domingo">Domingo</option>
                  </select>
                </div>
                <div class="row d-md-none d-block mt-4 " hidden>
                  <label for="dias" class="font-weight-bold ml-4"
                    >Quiero recibir los días</label
                  >
                  <select
                    [(ngModel)]="diaRecepcion"
                    name="dias"
                    id="dias"
                    class="ml-5"
                  >
                    <option value="Lunes" selected>Lunes</option>
                    <option value="Martes">Martes</option>
                    <option value="Miércoles">Miércoles</option>
                    <option value="Jueves">Jueves</option>
                    <option value="Viernes">Viernes</option>
                    <option value="Sábado">Sábado</option>
                    <option value="Domingo">Domingo</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="shadow-sm p-3 mb-2 bg-white rounded card mb-1">
        <div class="card-body">
          <div class="row">
            <h5
              class=""
              data-toggle="tooltip"
              data-placement="right"
              title="Puedes cambiar la opción seleccionada"
            >
              <strong>MÉTODO DE PAGO</strong>
            </h5>
          </div>
          <div class="row">
            <div class="d-flex flex-column">
              <h5><strong>Pago online</strong></h5>
              <div class="custom-control custom-checkbox">
                <input
                  type="radio"
                  class="custom-control-input"
                  name="metodo"
                  value="Pago con PAYPAL"
                  [(ngModel)]="metodo"
                  id="CheckPaypal"
                />
                <label class="custom-control-label" for="CheckPaypal"
                  >Pago con PAYPAL</label
                >
              </div>
              <div class="custom-control custom-checkbox">
                <input
                  type="radio"
                  class="custom-control-input"
                  name="metodo"
                  value="Pago con STRIPE"
                  [(ngModel)]="metodo"
                  id="CheckStripe"
                />
                <label class="custom-control-label" for="CheckStripe"
                  >Pago Online (Tarjeta Crédito, Débito, Google Pay, Apple
                  Pay)</label
                >
              </div>

              <h5 style="margin-top: 10px !important">
                <strong>Paga contra entrega</strong>
              </h5>

              <div class="custom-control custom-checkbox">
                <input
                  type="radio"
                  class="custom-control-input"
                  name="metodo"
                  value="Efectivo"
                  [(ngModel)]="metodo"
                  id="checkEfectivo"
                />
                <label class="custom-control-label" for="checkEfectivo"
                  >Efectivo</label
                >
              </div>

              <div class="custom-control custom-checkbox">
                <input
                  type="radio"
                  class="custom-control-input"
                  name="metodo"
                  value="Vales de despensa o electrónicos"
                  [(ngModel)]="metodo"
                  id="checkVales"
                />
                <label class="custom-control-label" for="checkVales"
                  >Vales de despensa o electrónicos</label
                >
              </div>

              <div class="custom-control custom-checkbox">
                <input
                  type="radio"
                  class="custom-control-input"
                  name="metodo"
                  value="Tarjeta de crédito"
                  [(ngModel)]="metodo"
                  id="checkTarjetaCredito"
                />
                <label class="custom-control-label" for="checkTarjetaCredito"
                  >Tarjeta de crédito</label
                >
              </div>

              <div class="custom-control custom-checkbox">
                <input
                  type="radio"
                  class="custom-control-input"
                  name="metodo"
                  value="Tarjeta de débito"
                  [(ngModel)]="metodo"
                  id="checkTarjetaDebito"
                />
                <label class="custom-control-label" for="checkTarjetaDebito"
                  >Tarjeta de débito</label
                >
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="shadow-sm p-3 mb-2 bg-white rounded card mb-1">
        <div class="card-body">
          <h3
            data-toggle="tooltip"
            data-placement="right"
            title="Puedes cambiar la opción seleccionada"
          >
            <b>SHOPPER DE CORAZÓN</b>
          </h3>
          <p>
            Elige si quieres que un Shopper de Corazón te contacte para
            confirmar tu pedido y darte opciones de productos sustitutos en caso
            necesario. Queremos que hagas tu super perfecto sin ir al super.
          </p>
          <div class="custom-control custom-control-inline custom-checkbox">
            <input
              class="custom-control-input"
              type="radio"
              name="contactar"
              [(ngModel)]="contactar"
              id="inlineCheckbox1"
              value="si"
            />
            <label
              class="custom-control-label monoRegular"
              for="inlineCheckbox1"
              >Si</label
            >
          </div>
          <div class="custom-control custom-control-inline custom-checkbox">
            <input
              class="custom-control-input"
              type="radio"
              name="contactar"
              [(ngModel)]="contactar"
              id="inlineCheckbox2"
              value="no"
            />
            <label
              class="custom-control-label monoRegular"
              for="inlineCheckbox2"
              >No</label
            >
          </div>
          <h4
            [hidden]="contactar === 'no'"
            data-toggle="tooltip"
            data-placement="right"
            title="Puedes cambiar la opción seleccionada"
          >
            <b>FORMA DE CONTACTO</b>
          </h4>
          <div
            [hidden]="contactar === 'no'"
            class="custom-control custom-control-inline custom-checkbox"
          >
            <input
              [disabled]="contactar === 'no'"
              class="custom-control-input"
              type="radio"
              name="contacto"
              [(ngModel)]="contacto"
              id="inlineCheckbox_1"
              value="Whatsapp"
            />
            <label
              class="custom-control-label texto-verde monoRegular"
              for="inlineCheckbox_1"
              >WhatsApp</label
            >
          </div>
          <div
            [hidden]="contactar === 'no'"
            class="custom-control custom-control-inline custom-checkbox"
          >
            <input
              [disabled]="contactar === 'no'"
              class="custom-control-input"
              type="radio"
              name="contacto"
              [(ngModel)]="contacto"
              id="inlineCheckbox_2"
              value="Teléfono"
            />
            <label
              class="custom-control-label monoRegular"
              for="inlineCheckbox_2"
              >Teléfono</label
            >
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6 col-12">
      <div class="">
        <div class="shadow-sm p-3 mb-1 bg-white rounded card mb-3">
          <div class="card-body">
            <h5 class="card-title"><b>PRODUCTOS AÑADIDOS</b></h5>
            <div class="scrollable4">
              <div class="col-12 text-right pr-0">
                <button
                  type="button"
                  class="btn btn-danger mt-2 mb-3"
                  style="background-color: #fc4b44 !important"
                  (click)="vaciarLista()"
                >
                  Vaciar lista
                </button>
              </div>
              <div
                *ngFor="let producto of productos; let index = index"
                [hidden]="producto.subtotal <= 0"
                class="row carrito-row align-items-center text-center mt-3"
              >
                <div class="col-6 col-md-3 d-flex">
                  <button
                    class="btn-primary-outline"
                    (click)="eliminarProducto(producto.paquete._id)"
                  >
                    <img
                      style="width: 20px"
                      class="mr-1"
                      src="assets/images/TACHE.svg"
                      alt=""
                    />
                  </button>
                  <img
                    [src]="url + producto.producto.img"
                    [routerLink]="['/producto', producto.producto._id]"
                    alt="icono"
                    class="w-50 h-50"
                  />
                </div>
                <div class="col-6 col-md-5">
                  <p style="font-size: 12px">
                    {{ producto.producto.nombre }}
                  </p>
                  <span class="badge badge-primary p-2 mb-3 mb-md-0">{{
                    producto.paquete.paquete
                  }}</span>
                </div>
                <div class="col-8 offset-2 col-md-4 offset-md-0">
                  <div class="row align-items-center">
                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <button
                          class="btn btn-outline-secondary"
                          (click)="cantidad(index, false)"
                          type="button"
                          id="button-addon1"
                        >
                          <i class="fas fa-minus"></i>
                        </button>
                      </div>
                      <input
                        type="number"
                        [value]="producto.cantidad"
                        disabled
                        readonly
                        class="form-control text-center p-0"
                        style="width: 25px !important"
                        placeholder=""
                        aria-label="Example text with button addon"
                        aria-describedby="button-addon1"
                      />
                      <div class="input-group-append">
                        <button
                          class="btn btn-outline-secondary"
                          (click)="cantidad(index, true)"
                          type="button"
                          id="button-addon1"
                        >
                          <i class="fas fa-plus"></i>
                        </button>
                      </div>
                    </div>

                    <div class="col-12 text-center" style="float: none">
                      <label class="" for="" id="lbPrecioUnitario">{{
                        producto.subtotal | currency: "MXN":"$":"1.2-2"
                      }}</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="shadow-sm p-3 mb-2 bg-white rounded card">
          <div class="card-body">
            <div class="row">
              <h4
                data-toggle="tooltip"
                data-placement="right"
                title="Puedes cambiar la opción seleccionada"
              >
                <b>ELIGE TU BOLSA</b
                ><img
                  src="assets/images/BOLSA.svg"
                  style="height: 20px"
                  height="15"
                  class="mb-2 ml-4"
                />
              </h4>
            </div>

            <div class="row align-items-end">
              <div
                *ngFor="let empa of empaques"
                class="col-md-4 d-none d-md-block"
              >
                <img
                  src="assets/images/002-datosentrega.jpg"
                  *ngIf="empa.tipoEmpaque == 'Tela'"
                  alt=""
                />
                <img
                  src="assets/images/001-datosentrega.jpg"
                  *ngIf="empa.tipoEmpaque == 'Papel'"
                  alt=""
                />
                <div
                  class="custom-control custom-control-inline custom-checkbox"
                >
                  <input
                    class="custom-control-input"
                    (change)="seleccionaEmpaque(empa._id)"
                    name="empaque"
                    type="radio"
                    [attr.id]="empa._id"
                    [(ngModel)]="empaque"
                    [value]="empa._id"
                  />
                  <label
                    class="custom-control-label monoRegular"
                    [attr.for]="empa._id"
                    ><b
                      >{{ empa.tipoEmpaque }} ({{
                        empa.precio | currency: "MXN":"$":"1.2-2"
                      }})</b
                    ></label
                  >
                </div>
              </div>
              <div
                *ngFor="let empa of empaques"
                class="col-12 d-md-none d-block mx-0"
              >
                <img
                  src="assets/images/002-datosentrega.jpg"
                  *ngIf="empa.tipoEmpaque == 'Tela'"
                  alt=""
                />
                <img
                  src="assets/images/001-datosentrega.jpg"
                  class="mx-0"
                  *ngIf="empa.tipoEmpaque == 'Papel'"
                  alt=""
                />
                <div
                  class="custom-control custom-control-inline custom-checkbox mx-0"
                >
                  <input
                    class="custom-control-input"
                    (change)="seleccionaEmpaque(empa._id)"
                    name="empaque1"
                    type="radio"
                    [attr.id]="empa._id"
                    [(ngModel)]="empaque"
                    [value]="empa._id"
                  />
                  <label class="custom-control-label" [attr.for]="empa._id"
                    >{{ empa.tipoEmpaque }} ({{
                      empa.precio | currency: "MXN":"$":"1.2-2"
                    }})</label
                  >
                </div>
              </div>
              <div class="col-md-4 col-12 text-center">
                <div class="row">
                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <button
                        class="btn btn-outline-secondary"
                        (click)="cantidadBolsa(true)"
                        type="button"
                        id="button-addon1"
                      >
                        <i class="fas fa-plus"></i>
                      </button>
                    </div>
                    <input
                      type="number"
                      [value]="_cantidadBolsa"
                      disabled
                      readonly
                      class="form-control text-center"
                      placeholder=""
                      aria-label="Example text with button addon"
                      aria-describedby="button-addon1"
                    />
                    <div class="input-group-append">
                      <button
                        class="btn btn-outline-secondary"
                        (click)="cantidadBolsa(false)"
                        type="button"
                        id="button-addon1"
                      >
                        <i class="fas fa-minus"></i>
                      </button>
                    </div>
                  </div>
                  <label>{{
                    empaqueSeleccionado.precio * _cantidadBolsa
                      | currency: "MXN":"$":"1.2-2"
                  }}</label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-6">
      <button
        type="button"
        (click)="eliminarSuscripcion()"
        style="font-size: 15px"
        class="mr-3 btn btn-danger text-white btn-sm"
      >
        Cancelar mi súper recurrente
      </button>
    </div>
    <div class="col-6 todos mt-2">
      <!-- [routerLink]="['/datosEntrega', 'suscripcion']" -->
      <button
        type="button"
        (click)="registrarSuscripcion()"

        routerLinkActive="router-link-active"
        class="btn btn-danger btn-sm mr-1"
      >
      Comprar súper recurrente
      </button>
   <!--    <button
        type="button"
        (click)="registrarSuscripcion()"
        class="btn bg-btnMorado btn-sm mr-1 text-white"
      >
        Actualizar datos
      </button> -->
    </div>
  </div>
</div>
